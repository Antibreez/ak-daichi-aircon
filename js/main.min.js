const emailValidation=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;let hasPurchaseDateError=!1,hasWarrantyCodeError=!1,hasWarrantyEmailError=!1,hasWarrantyCityError=!1;const warrantyCodeMask=$(".code-registration__form #warranty-code").attr("placeholder")?$(".code-registration__form #warranty-code").attr("placeholder").replace(/_/g,9):"99999-99999-99999";$(".code-registration__form #warranty-code").inputmask({mask:warrantyCodeMask,showMaskOnHover:!1});const isPurchaseDateValid=()=>{const r=$(".code-registration__form #purchase-date").val();return 2===$(".code-registration__form #purchase-date").val().split("").filter((r=>"."===r)).length&&!!Date.parse(`${r.split(".")[1]}/${r.split(".")[0]}/${r.split(".")[2]}`)},isWarrantyCodeValid=()=>$(".code-registration__form #warranty-code").attr("pattern")?$(".code-registration__form #warranty-code").val().trim()&&new RegExp($(".code-registration__form #warranty-code").attr("pattern")).test($(".code-registration__form #warranty-code").val()):$(".code-registration__form #warranty-code").val().trim()&&!$(".code-registration__form #warranty-code").val().includes("_"),isWarrantyEmailValid=()=>!(!$(".code-registration__form #email").val().trim()||!new RegExp(emailValidation).test($(".code-registration__form #email").val())),isWarrantyCityValid=()=>!!$(".code-registration__form #city").val().trim();function onPurchaseDateSelect(){hasPurchaseDateError=!1,$(".code-registration__form #purchase-date").parent().removeClass("is--invalid"),hasWarrantyCodeError||hasPurchaseDateError||$('.code-registration__form button[type="submit"]').removeAttr("disabled")}datepickerMonths=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],$.datepicker.regional.ru={closeText:"Закрыть",prevText:"Предыдущий",nextText:"Следующий",currentText:"Сегодня",monthNames:datepickerMonths,monthNamesShort:datepickerMonths,dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",changeMonth:!0,changeYear:!0,yearRange:`1990:${(new Date).getFullYear()}`,minDate:new Date(1990,0,1),maxDate:new Date,showOtherMonths:!0,onSelect:onPurchaseDateSelect,onChangeMonthYear:function(){console.log("###el",$("#ui-datepicker-div").find("select")),setTimeout((()=>{$("#ui-datepicker-div").find("select").each(((r,e)=>{$(e).select2({minimumResultsForSearch:1/0,dropdownCssClass:"datepicker-dropdown"})}))}),100)}},$.datepicker.setDefaults($.datepicker.regional.ru),$("#purchase-date").datepicker(),$("#purchase-date").on("click",(function(){$("#ui-datepicker-div").find("select").each(((r,e)=>{$(e).select2({minimumResultsForSearch:1/0,dropdownCssClass:"datepicker-dropdown"})}))})),$(".code-registration__form #warranty-code").on("input",(function(r){hasWarrantyCodeError=!1,$(".code-registration__form #warranty-code").parent().removeClass("is--invalid"),hasWarrantyCodeError||hasPurchaseDateError||$('.code-registration__form button[type="submit"]').removeAttr("disabled")})),$(".code-registration__form #purchase-date").on("input",(function(r){hasPurchaseDateError=!1,$(".code-registration__form #purchase-date").parent().removeClass("is--invalid"),hasWarrantyCodeError||hasPurchaseDateError||$('.code-registration__form button[type="submit"]').removeAttr("disabled")})),$(document).on("input",".code-registration__form #email",(function(){hasWarrantyEmailError=!1,$(".code-registration__form #email").parent().removeClass("is--invalid"),hasWarrantyEmailError||hasWarrantyCityError||$('.code-registration__form button[type="submit"]').removeAttr("disabled")})),$(document).on("input",".code-registration__form #city",(function(){hasWarrantyCityError=!1,$(".code-registration__form #city").parent().removeClass("is--invalid"),hasWarrantyEmailError||hasWarrantyCityError||$('.code-registration__form button[type="submit"]').removeAttr("disabled")})),$(document).on("click",'.code-registration__form button[type="submit"]',(function(r){r.preventDefault();const e=$(".code-registration__form #warranty-code").length?1:$(".code-registration__form #email").length?2:3;if(1===e){let r=!0;isWarrantyCodeValid()||(hasWarrantyCodeError=!0,$(".code-registration__form #warranty-code").parent().addClass("is--invalid"),r=!1),isPurchaseDateValid()||(hasPurchaseDateError=!0,$(".code-registration__form #purchase-date").parent().addClass("is--invalid"),r=!1),console.log("valid",r),r?$(".code-registration__form").find("form").submit():$('.code-registration__form button[type="submit"]').attr("disabled",!0)}if(2===e){let r=!0;isWarrantyEmailValid()||(hasWarrantyEmailError=!0,$(".code-registration__form #email").parent().addClass("is--invalid"),r=!1),isWarrantyCityValid()||(hasWarrantyCityError=!0,$(".code-registration__form #city").parent().addClass("is--invalid"),r=!1),r?$(".code-registration__form").find("form").submit():$('.code-registration__form button[type="submit"]').attr("disabled",!0)}})),$(document).on("click",".code-registration__form .code-registration__note",(function(){if($(this).hasClass("is--opened"))$(this).removeClass("is--opened"),$(".code-registration__code-popup--outer").remove();else{$(this).addClass("is--opened");const r=$(".code-registration__form .code-registration__note").find(".code-registration__code-popup").clone();r.addClass("code-registration__code-popup--outer"),$("body").append(r),r.addClass("is--visible")}}));const onWarrantyCodePopupClose=()=>{$(".code-registration__form .code-registration__note").removeClass("is--opened"),$(".code-registration__code-popup--outer").remove()};$(document).on("click",".code-registration__code-popup--outer .code-registration__code-popup-bg",onWarrantyCodePopupClose),$(document).on("click",".code-registration__code-popup--outer .code-registration__code-popup-close",onWarrantyCodePopupClose);
//# sourceMappingURL=main.min.js.map
